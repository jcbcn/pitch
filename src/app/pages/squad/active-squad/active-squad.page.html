<div fxLayout="row" fxLayout.sm="column" fxLayout.xs="column" fxLayoutWrap fxLayoutGap="1%">
    <div fxFlex="70%" fxLayout="column" fxLayoutWrap fxLayoutGap="3%" fxLayoutAlign="space-around stretch">
        <div class="container squad-name">
            <mat-form-field appearance="outline" style="margin-bottom: -1.25em">
                <mat-label>Team Name</mat-label>
                <input matInput *ngIf="squad" [(ngModel)]="squad.name" placeholder="Your Squad Name"
                    (input)="pendingChanges = true">
            </mat-form-field>
        </div>
        <div>
            <button mat-button color="primary" *ngIf="!pendingChanges && squad" routerLink="/squad/active">
                <fa-icon [icon]="tickIcon" class="mr-2 text-white ml-2"></fa-icon>
                <span>Last updated {{squad.lastUpdated | timeAgo}}</span>
            </button>
            <button mat-flat-button color="primary" class="block" *ngIf="pendingChanges" (click)="save()">
                <fa-icon [icon]="tickIcon" class="mr-2 text-white ml-2"></fa-icon>
                <span>Save changes</span>
            </button>
        </div>
        <div fxLayout="row" fxLayoutWrap fxLayoutGap="5%" fxLayoutAlign="space-around center">
            <mat-card fxFlex="40%" class="text-center">
                <mat-card-header>
                    <mat-card-title>Chemistry</mat-card-title>
                </mat-card-header>
                <mat-card-content>
                    {{stats.chemistry | number:'2.0-0'}}%
                </mat-card-content>
            </mat-card>
            <mat-card fxFlex="40%" class="text-center">
                <mat-card-header>
                    <mat-card-title>Rating</mat-card-title>
                </mat-card-header>
                <mat-card-content>
                    <div>{{stats.rating | number:'2.0-0'}}</div>
                </mat-card-content>
            </mat-card>
        </div>

        <div class="isometric-container">
            <div class="isometric">
                <div>
                    <div fxLayout="row" fxLayoutWrap fxLayoutGap="1%" fxLayoutAlign="center">
                        <div fxFlex="25%"></div>
                        <div fxFlex="25%">
                            <div>
                                <pitch-player-card (click)="pickPlayer('LST')" [card]="cards['LST']" size="sm"
                                    mode="squad">
                                </pitch-player-card>
                            </div>
                        </div>
                        <div fxFlex="25%">
                            <div>
                                <pitch-player-card (click)="pickPlayer('RST')" [card]="cards['RST']" size="sm"
                                    mode="squad">
                                </pitch-player-card>
                            </div>
                        </div>
                        <div fxFlex="25%"></div>
                    </div>
                    <div fxLayout="row" fxLayoutWrap fxLayoutGap="1%" fxLayoutAlign="center">
                        <div fxFlex="25%">
                            <div>
                                <pitch-player-card (click)="pickPlayer('LM')" [card]="cards['LM']" size="sm"
                                    mode="squad">
                                </pitch-player-card>
                            </div>
                        </div>
                        <div fxFlex="25%">
                            <div>
                                <pitch-player-card (click)="pickPlayer('LCM')" [card]="cards['LCM']" size="sm"
                                    mode="squad">
                                </pitch-player-card>
                            </div>
                        </div>
                        <div fxFlex="25%">
                            <div>
                                <pitch-player-card (click)="pickPlayer('RCM')" [card]="cards['RCM']" size="sm"
                                    mode="squad">
                                </pitch-player-card>
                            </div>
                        </div>
                        <div fxFlex="25%">
                            <div>
                                <pitch-player-card (click)="pickPlayer('RM')" [card]="cards['RM']" size="sm"
                                    mode="squad">
                                </pitch-player-card>
                            </div>
                        </div>
                    </div>
                    <div class="flex pb-8 lg:pb-16" fxLayout="row" fxLayoutWrap fxLayoutGap="1%" fxLayoutAlign="center">
                        <div fxFlex="25%">
                            <div>
                                <pitch-player-card (click)="pickPlayer('LB')" [card]="cards['LB']" size="sm"
                                    mode="squad">
                                </pitch-player-card>
                            </div>
                        </div>
                        <div fxFlex="25%">
                            <div>
                                <pitch-player-card (click)="pickPlayer('LCB')" [card]="cards['LCB']" size="sm"
                                    mode="squad">
                                </pitch-player-card>
                            </div>
                        </div>
                        <div fxFlex="25%">
                            <div>
                                <pitch-player-card (click)="pickPlayer('RCB')" [card]="cards['RCB']" size="sm"
                                    mode="squad">
                                </pitch-player-card>
                            </div>
                        </div>
                        <div fxFlex="25%">
                            <div>
                                <pitch-player-card (click)="pickPlayer('RB')" [card]="cards['RB']" size="sm"
                                    mode="squad">
                                </pitch-player-card>
                            </div>
                        </div>
                    </div>
                    <div fxLayout="row" fxLayoutWrap fxLayoutGap="1%" fxLayoutAlign="center">
                        <div fxFlex="25%">
                            <div>
                                <pitch-player-card (click)="pickPlayer('GK')" [(card)]="cards['GK']" size="sm"
                                    mode="squad">
                                </pitch-player-card>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="container">
            <h2>Subs</h2>
            <div *ngIf="squad" fxLayout="row wrap" fxLayoutGap="0.5%" fxLayoutAlign="space-around center">
                <pitch-player-card *ngFor="let id of squad.subs; let i = index" (click)="pickSub(i)" [card]="cards[id]"
                    size="sm" mode="squad">
                </pitch-player-card>
            </div>
        </div>
    </div>

    <div fxFlex class="container">
        <h2>Team Instructions</h2>
        <div fxLayout="column" fxLayoutWrap fxLayoutGap="0.5%" fxLayoutAlign="center stretch">
            <mat-form-field *ngIf="squad">
                <mat-label>Core Style</mat-label>
                <mat-select [(ngModel)]="squad.instructions['core']">
                    <mat-option [value]="0">Default</mat-option>
                    <mat-option [value]="1">Attacking</mat-option>
                    <mat-option [value]="2">Defensive</mat-option>
                </mat-select>
            </mat-form-field>
            <mat-form-field *ngIf="squad">
                <mat-label>Attacking Style</mat-label>
                <mat-select [(ngModel)]="squad.instructions['attacking']">
                    <mat-option [value]="0">Default</mat-option>
                    <mat-option [value]="1">Direct</mat-option>
                    <mat-option [value]="2">Short</mat-option>
                </mat-select>
            </mat-form-field>
            <mat-form-field *ngIf="squad">
                <mat-label>Defensive Style</mat-label>
                <mat-select [(ngModel)]="squad.instructions['defensive']">
                    <mat-option [value]="0">Default</mat-option>
                    <mat-option [value]="1">Press</mat-option>
                    <mat-option [value]="2">Contain</mat-option>
                </mat-select>
            </mat-form-field>
        </div>

    </div>
</div>